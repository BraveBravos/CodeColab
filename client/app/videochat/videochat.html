<div class='video-chat-area'>
<div class='video-chats-area'>
      <div id='video-chats'>
        <div id='remote-media-streams'></div>
        <div id='local-media-stream'></div>
      </div>
  </div>
   
<script src="//cdn.webrtc-experiment.com/firebase.js"> </script>
<script type="text/javascript" src="app/videochat/meeting.js"></script>
<script type="text/javascript">
var isJoin = false;

var meeting = new Meeting('webrtc-code-colab-id');

var remoteMediaStreams = document.getElementById('video-chats');
var localMediaStream = document.getElementById('local-media-stream');

// on getting local or remote streams
meeting.onaddstream = function(e) {
    if (e.type == 'remote' && isJoin) remoteMediaStreams.insertBefore(e.video, remoteMediaStreams.firstChild);
    e.video.className = 'their-video';
};

// check pre-created meeting rooms
// it is useful to auto-join
// or search pre-created sessions
// TODO set roomname to repo
meeting.check('meeting room name');

meeting.firebase = 'webrtc-codecolab';

meeting.onuserleft = function(userid) {
        var video = document.getElementById(userid);
        if (video) video.parentNode.removeChild(video);
};

document.getElementById('setup-new-meeting').onclick = function() {
    meeting.setup('meeting room name');
    isJoin = true;
    this.className = 'hidden';
    document.getElementById('leave-current-meeting').className = 'shown';
};

document.getElementById('leave-current-meeting').onclick = function(){
  isJoin = false;
  meeting.leave();
  this.className = 'hidden';
  document.getElementById('setup-new-meeting').className = 'shown';
};
</script>
<div id='setup-new-meeting'>Join Video Chat</div>
      <div id='leave-current-meeting' class='hidden'>Leave Video Chat</div>