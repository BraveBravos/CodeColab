<div class='video-chat-area'>
<!--
<iframe src="app/videochat/inner-vidchat.html" class='video-chat-area'>

</iframe>
-->
<div class='video-chats-area'>
      <div id='video-chats'>
        <!-- <div id='video-chat-title'>CodeColab Video Chat</div> -->
        <div id='remote-media-streams'></div>
        <div id='local-media-stream'></div>
      </div>
      <div id='setup-new-meeting'>Join Video Chat</div>
      <div id='leave-current-meeting' class='hidden'>Leave Video Chat</div>
    
  </div>
<script src="//cdn.webrtc-experiment.com/firebase.js"> </script>
<script type="text/javascript" src="app/videochat/meeting.js"></script>
<script type="text/javascript">
var meeting = new Meeting('webrtc-code-colab-id');

var remoteMediaStreams = document.getElementById('remote-media-streams');
var localMediaStream = document.getElementById('local-media-stream');

// on getting local or remote streams
meeting.onaddstream = function(e) {
    // e.type == 'local' ---- it is local media stream
    // e.type == 'remote' --- it is remote media stream
    //document.body.appendChild(e.video);
    if (e.type == 'remote') remoteMediaStreams.insertBefore(e.video, remoteMediaStreams.firstChild);
    e.video.className = 'their-video';
};

// check pre-created meeting rooms
// it is useful to auto-join
// or search pre-created sessions
// TODO set roomname to repo
meeting.check('meeting room name');

meeting.firebase = 'webrtc-codecolab';

meeting.onuserleft = function(userid) {
        var video = document.getElementById(userid);
        if (video) video.parentNode.removeChild(video);
};

document.getElementById('setup-new-meeting').onclick = function() {
    meeting.setup('meeting room name');
    this.className = 'hidden';
    document.getElementById('leave-current-meeting').className = 'shown';
};

document.getElementById('leave-current-meeting').onclick = function(){
  meeting.leave();
  this.className = 'hidden';
  document.getElementById('setup-new-meeting').className = 'shown';
};
</script>
</div>